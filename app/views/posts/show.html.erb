<div id="<%= dom_id @post %>" class="rounded-lg border bg-white text-card-foreground shadow-sm">
  <div class="p-6 flex flex-col gap-2 md:gap-0 md:flex-row md:items-center justify-between">
    <div class="grid gap-1">
      <h3 class="text-2xl font-semibold leading-none tracking-tight">
        <%= link_to @post.title, @post.project %>
      </h3>
      
      <h4>
        <%= link_to "#{@post.project.title}", @post.project %>
      </h4>
    </div>

    <div class="flex gap-2">
      <%= link_to("Edit", edit_post_path(@post), class: "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-primary border hover:border-gray-300 h-7 px-2 py-1") %>
      <%= button_to("Delete", post_path(@post), method: :delete, data: { turbo_confirm: 'Are you sure?', turbo_method: :delete }, class: "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-primary border hover:border-gray-300 h-7 px-2 py-1") %>
    </div>
  </div>
</div>

<div class="rounded-lg border bg-white text-card-foreground shadow-sm mt-4">
  <div class="space-y-1.5 p-6 flex flex-col gap-4">
    <div class="flex items-center border-b pb-4 gap-4">
      <%= render partial: "users/user_avatar", locals: { user: @post.user } %>

      <div class="flex flex-col">
        <div class="text-md font-bold">
          <%= "#{@post.user.first_name} #{@post.user.last_name}" %>
        </div>
        <div class="text-xs text-gray-400">
          <%= time_ago_in_words @post.created_at %> ago
        </div>
      </div>
    </div>

    <%= @post.content %>

    <div class="flex flex-col border-t pt-4">
      <div id="Post-<%= @post.id %>-comments" class="flex flex-col gap-6">
        <% @post.comments.order(created_at: :asc).each do |comment| %>
        <%= render partial: "comments/comment", locals: { comment: comment } %>
        <% end %>
      </div>

      <div class="<%= @post.comments.size > 0 ? "mt-4" : "mt-0" %>">
        <%= render partial: "comments/form", locals: { comment: Comment.new(record: @post) } %>
      </div>
    </div>
  </div>
</div>
